var CurrentDate=new Date(),TimeZoneOffset=-CurrentDate.getTimezoneOffset()/60,regDBDate=new RegExp("^([0-9]{4})-([0-9]|[1][0-9]|[1][0,1,2])-([0-9]|[0,1,2][0-9]|[3][0,1])$",""),regDBDateTimeTZ=new RegExp("^([0-9]{4})-([0-9]|[0][0-9]|[1][0,1,2])-([0-9]|[0,1,2][0-9]|[3][0,1])[ T]([0-2][0-9]):([0-6][0-9])Z?$","");var date_format,datetime_format,time_format;var iOS=(navigator.userAgent.match(/(iPad|iPhone|iPod)/i)?true:false);function AppReload(){if(mobile_app&&!iOS&&navigator.app!==undefined){navigator.app.loadUrl("file:///android_asset/www/app.htm")}else{if(typeof home_created!=="undefined"){home_created=false}$.mobile.changePage("#LoginPage");location.reload()}}function GetLanguage(){var a=localStorage.getItem("QAppLanguage");if(a!==null&&a!==""){if(a!=="Auto"){return a}}try{var d,c;if(navigator&&navigator.userAgent&&(c=navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))){if(c&&c[1]){d=c[1]}}if(!d&&navigator){if(navigator.language){d=navigator.language}else{if(navigator.browserLanguage){d=navigator.browserLanguage}else{if(navigator.systemLanguage){d=navigator.systemLanguage}else{if(navigator.userLanguage){d=navigator.userLanguage}}}}if(d&&d.substr(0,2)!=="zh"){d=d.substr(0,2)}}if(!d){d="en"}}catch(b){d="en"}return d}function getAppLanguage(){var b={en:"en_us",fr:"fr_FR",es:"es_es",sp:"es_es",de:"de_de",nl:"nl_nl",zh:"zh_tw","zh-tw":"zh_tw","zh-hk":"zh_tw","zh-cn":"zh_cn","zh-sg":"zh_cn"},a=GetLanguage();return b[a]===undefined?"en_us":b[a]}function getMobileLanguage(){var b={en:"en_us",fr:"fr_FR",es:"es_es",sp:"es_es",it:"it_it",de:"de_de",nl:"nl_nl",zh:"zh_tw","zh-tw":"zh_tw","zh-hk":"zh_tw","zh-cn":"zh_cn","zh-sg":"zh_cn"},a=GetLanguage();return b[a]===undefined?"en_us":b[a]}function getSugarLanguage(a,e){var f=GetLanguage().substring(0,2),d;for(var b in a){var c=b.substring(0,2);if(c===f||(f==="es"&&c==="sp")){d=b;break}}if(d===undefined){d=e}return d}Date.prototype.addHours=function(a){this.setTime(this.getTime()+(a*3600000));return this};Date.prototype.isDST=function(){var c=this.getTimezoneOffset(),b=new Date(),a=0;while(a<12){b.setMonth(++a);if(b.getTimezoneOffset()>c){return true}if(b.getTimezoneOffset()<c){return false}}return false};if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}function getDateTimeFormats(c){if(typeof GetDemo==="function"){if(GetDemo()){c=null}}if(c&&c.user_default_dateformat!==undefined){switch(c.user_default_dateformat.value){case"Y-m-d":date_format="yyyy-mm-dd";break;case"m-d-Y":date_format="mm-dd-yyyy";break;case"d-m-Y":date_format="dd-mm-yyyy";break;case"Y/m/d":date_format="yyyy/mm/dd";break;case"m/d/Y":date_format="mm/dd/yyyy";break;case"d/m/Y":date_format="dd/mm/yyyy";break;case"Y.m.d":date_format="yyyy.mm.dd";break;case"d.m.Y":date_format="dd.mm.yyyy";break;case"m.d.Y":date_format="mm.dd.yyyy";break;default:date_format="mm/dd/yyyy"}if(c.user_default_timeformat.value==="H:i"||c.user_default_timeformat.value==="H.i"){AMPM=false;time_format="HH:ii"}else{AMPM=true;time_format="hh:ii A"}}else{var a=GetLanguage();try{AMPM=(a==="en");date_format=(a==="en")?"mm/dd/yyyy":jQuery.mobiscroll.i18n[a].dateFormat;time_format=(a==="en")?"hh:ii A":jQuery.mobiscroll.i18n[a].timeFormat}catch(b){AMPM=true;date_format="mm/dd/yyyy";time_format="hh:ii A"}}localStorage.setItem("date_format",date_format);localStorage.setItem("time_format",time_format);datetime_format=date_format+" "+time_format}function toDBDate(b){if(b===null||b===""){return""}var c=b.getFullYear().toString(),d=b.getMonth()+1,a=b.getDate();d=((d<10)?"0":"")+d.toString();a=((a<10)?"0":"")+a.toString();return c+"-"+d+"-"+a}function toDBDateTime(b,d){if(b===null||b===""){return""}if(d!==false){b=b.addHours(-TimeZoneOffset);if(!b.isDST()){b=b.addHours(1)}}var a=b.getHours(),c=b.getMinutes();if(a===0){a="00"}else{a=((a<10)?"0":"")+a.toString()}if(c===0){c="00"}else{c=((c<10)?"0":"")+c.toString()}return toDBDate(b)+" "+a+":"+c+":00"}function fromDBDate(a){return new Date(a.substring(0,4),parseInt(a.substring(5,7),10)-1,a.substring(8,10))}function fromDBDateTime(f){if(f.length<14){return new Date()}var b=f.substring(8,10),g=parseInt(f.substring(5,7),10),d=parseInt(f.substring(0,4),10),a=parseInt(f.substring(11,13),10),c=parseInt(f.substring(14,16),10),e=new Date(d,g-1,b,a.toString(),c,0,0);e=e.addHours(TimeZoneOffset);if(!e.isDST()){e=e.addHours(-1)}return e}function toDBDateString(b){if(b===""){return""}else{if(Modernizr.inputtypes.date||regDBDate.test(b)){return b}else{var c=b.replace(regDate,regMonth);if(c.length===1){c="0"+c}var a=b.replace(regDate,regDay);if(a.length===1){a="0"+a}return b.replace(regDate,"$3-"+c+"-"+a)}}}function toDBDateTimeString(f){if(f===""){return""}else{f=f.substr(0,16).replace("T"," ").replace("Z","");var d,g,b,a,c,e;if(regDBDateTimeTZ.test(f)){d=f.replace(regDBDateTimeTZ,"$1");g=f.replace(regDBDateTimeTZ,"$2");b=f.replace(regDBDateTimeTZ,"$3");a=f.replace(regDBDateTimeTZ,"$4");c=f.replace(regDBDateTimeTZ,"$5")}else{b=f.replace(regDateTime,regDay);g=f.replace(regDateTime,regMonth);a=f.replace(regDateTime,"$4");c=f.replace(regDateTime,"$5");d=f.replace(regDateTime,"$3")}e=new Date(d,g-1,b,a,0,0,0);e=e.addHours(-TimeZoneOffset);if(!e.isDST()){e=e.addHours(1)}d=e.getFullYear().toString();g=1+e.getMonth();g=(g<10?"0":"")+g.toString();b=e.getDate();b=(b<10?"0":"")+b.toString();a=e.getHours();a=(a<10?"0":"")+a.toString();c=parseInt(c,10);c=(c<10?"0":"")+c.toString();return d+"-"+g+"-"+b+" "+a+":"+c+":00"}}function checkDateTimeString(a){if((a==="")||Modernizr.inputtypes.datetime||OptDatePicker){return true}else{if(regDBDateTimeTZ.test(a)){return true}else{return regDateTime.test(a)}}}function checkDateString(a){if((a==="")||Modernizr.inputtypes.date||OptDatePicker){return true}else{if(regDBDate.test(a)){return true}else{return regDate.test(a)}}}function HTMLDecode(a){return jQuery("<div></div>").html(a).text()}function DisplayDate(b){var a=getMobileLanguage().substr(0,2);return jQuery.mobiscroll.formatDate((a==="en")?"mm/dd/yyyy":jQuery.mobiscroll.i18n[a].dateFormat,b)}function getAppString(b,a){return b.replace("@",a)};